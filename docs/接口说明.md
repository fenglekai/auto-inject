# 接口说明

# AutoInject

> v1.0.0

Base URLs:

# Authentication

# Default

## POST 读取Modbus数据

POST /plc/read

> Body 请求参数

```json
{
  "ip": "127.0.0.1",
  "port": 8888,
  "start": 2000,
  "count": 1,
  "method": "readCoils"
}
```

### 请求参数

| 名称     | 位置 | 类型    | 必选 | 说明 |
| -------- | ---- | ------- | ---- | ---- |
| body     | body | object  | 否   | none |
| » ip     | body | string  | 是   | none |
| » port   | body | integer | 是   | none |
| » start  | body | integer | 是   | none |
| » count  | body | integer | 是   | none |
| » method | body | string  | 是   | none |

> 返回示例

> 成功

```json
{
  "data": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0
  ]
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称   | 类型      | 必选 | 约束 | 中文名 | 说明 |
| ------ | --------- | ---- | ---- | ------ | ---- |
| » data | [integer] | true | none |        | none |

## POST 写入Modbus数据

POST /plc/write

> Body 请求参数

```json
{
  "ip": "127.0.0.1",
  "port": 8888,
  "key": 2000,
  "value": 1,
  "method": "writeSingleCoil"
}
```

### 请求参数

| 名称     | 位置 | 类型    | 必选 | 说明 |
| -------- | ---- | ------- | ---- | ---- |
| body     | body | object  | 否   | none |
| » ip     | body | string  | 是   | none |
| » port   | body | integer | 是   | none |
| » key    | body | integer | 是   | none |
| » value  | body | integer | 是   | none |
| » method | body | string  | 是   | none |

> 返回示例

> 成功

```json
{
  "message": "写入成功"
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型   | 必选 | 约束 | 中文名 | 说明 |
| --------- | ------ | ---- | ---- | ------ | ---- |
| » message | string | true | none |        | none |

## GET 获取任务列表

GET /task/getTask

> 返回示例

> 成功

```json
{
  "data": [
    {
      "taskName": "Task_1",
      "taskList": [
        {
          "type": "readModbus",
          "status": 0,
          "data": [
            {
              "ip": "localhost",
              "port": "8888",
              "readAddress": "5",
              "readValue": "1",
              "watchValue": null,
              "method": "readCoils"
            }
          ]
        },
        {
          "type": "request",
          "status": 0,
          "data": {
            "method": "POST",
            "url": "http://localhost:3000/test",
            "data": "{\"key\": 2}"
          }
        }
      ],
      "taskStatus": 0
    },
    {
      "taskName": "Task_2",
      "taskList": [
        {
          "type": "readModbus",
          "status": 0,
          "data": [
            {
              "ip": "localhost",
              "port": "8888",
              "readAddress": "5",
              "readValue": "1",
              "watchValue": null,
              "method": "readHoldingRegisters"
            }
          ]
        },
        {
          "type": "request",
          "status": 0,
          "data": {
            "method": "GET",
            "url": "http://localhost:3000/test",
            "data": [
              {
                "name": "key",
                "value": "value"
              }
            ]
          }
        }
      ],
      "taskStatus": 0
    },
    {
      "taskName": "Task_3",
      "taskList": [
        {
          "type": "readModbus",
          "status": 0,
          "data": [
            {
              "ip": "localhost",
              "port": "8888",
              "readAddress": "5",
              "readValue": "1",
              "watchValue": null,
              "method": "readDiscreteInputs"
            }
          ]
        },
        {
          "type": "request",
          "status": 0,
          "data": {
            "method": "GET",
            "url": "http://localhost:3000/test",
            "data": [
              {
                "name": "key",
                "value": "value"
              }
            ]
          }
        }
      ],
      "taskStatus": 0
    },
    {
      "taskName": "Task_4",
      "taskList": [
        {
          "type": "readModbus",
          "status": 0,
          "data": [
            {
              "ip": "localhost",
              "port": "8888",
              "readAddress": "5",
              "readValue": "1",
              "watchValue": null,
              "method": "readInputRegisters"
            }
          ]
        },
        {
          "type": "request",
          "status": 0,
          "data": {
            "method": "GET",
            "url": "http://localhost:3000/test",
            "data": [
              {
                "name": "key",
                "value": "value"
              }
            ]
          }
        }
      ],
      "taskStatus": 0
    },
    {
      "taskName": "Task_5",
      "taskList": [
        {
          "type": "request",
          "status": 0,
          "data": {
            "method": "GET",
            "url": "http://localhost:3000/test",
            "data": [
              {
                "name": "key",
                "value": "value"
              }
            ]
          }
        },
        {
          "type": "request",
          "status": 0,
          "data": {
            "method": "POST",
            "url": "http://localhost:3000/test",
            "data": "{\"key\": 1}"
          }
        }
      ],
      "taskStatus": 0
    }
  ],
  "message": "success"
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称             | 类型     | 必选 | 约束 | 中文名 | 说明 |
| ---------------- | -------- | ---- | ---- | ------ | ---- |
| » data           | [object] | true | none |        | none |
| »» taskName      | string   | true | none |        | none |
| »» taskList      | [object] | true | none |        | none |
| »»» type         | string   | true | none |        | none |
| »»» status       | integer  | true | none |        | none |
| »»» data         | object   | true | none |        | none |
| »»»» ip          | string   | true | none |        | none |
| »»»» port        | string   | true | none |        | none |
| »»»» readAddress | string   | true | none |        | none |
| »»»» readValue   | string   | true | none |        | none |
| »»»» watchValue  | null     | true | none |        | none |
| »»»» method      | string   | true | none |        | none |
| »»»» method      | string   | true | none |        | none |
| »»»» url         | string   | true | none |        | none |
| »»»» data        | [object] | true | none |        | none |
| »»»»» name       | string   | true | none |        | none |
| »»»»» value      | string   | true | none |        | none |
| »» taskStatus    | integer  | true | none |        | none |
| » message        | string   | true | none |        | none |

## POST 设置任务列表

POST /task/setTask

> Body 请求参数

```json
{
  "task": [
    {
      "taskName": "Task_1",
      "taskList": [
        {
          "type": "readModbus",
          "status": 0,
          "data": [
            {
              "ip": "localhost",
              "port": "8888",
              "readAddress": "5",
              "readValue": "1",
              "watchValue": null,
              "method": "readCoils"
            }
          ]
        },
        {
          "type": "request",
          "status": 0,
          "data": {
            "method": "POST",
            "url": "http://localhost:3000/test",
            "data": "{\"key\": 2}"
          }
        }
      ],
      "taskStatus": 0
    },
    {
      "taskName": "Task_2",
      "taskList": [
        {
          "type": "readModbus",
          "status": 0,
          "data": [
            {
              "ip": "localhost",
              "port": "8888",
              "readAddress": "5",
              "readValue": "1",
              "watchValue": null,
              "method": "readHoldingRegisters"
            }
          ]
        },
        {
          "type": "request",
          "status": 0,
          "data": {
            "method": "GET",
            "url": "http://localhost:3000/test",
            "data": [
              {
                "name": "key",
                "value": "value"
              }
            ]
          }
        }
      ],
      "taskStatus": 0
    },
    {
      "taskName": "Task_3",
      "taskList": [
        {
          "type": "readModbus",
          "status": 0,
          "data": [
            {
              "ip": "localhost",
              "port": "8888",
              "readAddress": "5",
              "readValue": "1",
              "watchValue": null,
              "method": "readDiscreteInputs"
            }
          ]
        },
        {
          "type": "request",
          "status": 0,
          "data": {
            "method": "GET",
            "url": "http://localhost:3000/test",
            "data": [
              {
                "name": "key",
                "value": "value"
              }
            ]
          }
        }
      ],
      "taskStatus": 0
    },
    {
      "taskName": "Task_4",
      "taskList": [
        {
          "type": "readModbus",
          "status": 0,
          "data": [
            {
              "ip": "localhost",
              "port": "8888",
              "readAddress": "5",
              "readValue": "1",
              "watchValue": null,
              "method": "readInputRegisters"
            }
          ]
        },
        {
          "type": "request",
          "status": 0,
          "data": {
            "method": "GET",
            "url": "http://localhost:3000/test",
            "data": [
              {
                "name": "key",
                "value": "value"
              }
            ]
          }
        }
      ],
      "taskStatus": 0
    },
    {
      "taskName": "Task_5",
      "taskList": [
        {
          "type": "request",
          "status": 0,
          "data": {
            "method": "GET",
            "url": "http://localhost:3000/test",
            "data": [
              {
                "name": "key",
                "value": "value"
              }
            ]
          }
        },
        {
          "type": "request",
          "status": 0,
          "data": {
            "method": "POST",
            "url": "http://localhost:3000/test",
            "data": "{\"key\": 1}"
          }
        }
      ],
      "taskStatus": 0
    }
  ]
}
```

### 请求参数

| 名称             | 位置 | 类型     | 必选 | 说明 |
| ---------------- | ---- | -------- | ---- | ---- |
| body             | body | object   | 否   | none |
| » task           | body | [object] | 是   | none |
| »» taskName      | body | string   | 是   | none |
| »» taskList      | body | [object] | 是   | none |
| »»» type         | body | string   | 是   | none |
| »»» status       | body | integer  | 是   | none |
| »»» data         | body | object   | 是   | none |
| »»»» ip          | body | string   | 是   | none |
| »»»» port        | body | string   | 是   | none |
| »»»» readAddress | body | string   | 是   | none |
| »»»» readValue   | body | string   | 是   | none |
| »»»» watchValue  | body | null     | 是   | none |
| »»»» method      | body | string   | 是   | none |
| »»»» method      | body | string   | 是   | none |
| »»»» url         | body | string   | 是   | none |
| »»»» data        | body | [object] | 是   | none |
| »»»»» name       | body | string   | 是   | none |
| »»»»» value      | body | string   | 是   | none |
| »» taskStatus    | body | integer  | 是   | none |

> 返回示例

> 成功

```json
{
  "message": "success"
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型   | 必选 | 约束 | 中文名 | 说明 |
| --------- | ------ | ---- | ---- | ------ | ---- |
| » message | string | true | none |        | none |

## GET 开始任务

GET /task/start

> 返回示例

> 成功

```json
{
  "message": "success"
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型   | 必选 | 约束 | 中文名 | 说明 |
| --------- | ------ | ---- | ---- | ------ | ---- |
| » message | string | true | none |        | none |

## GET 终止任务

GET /task/stop

> 返回示例

> 成功

```json
{
  "message": "success"
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称      | 类型   | 必选 | 约束 | 中文名 | 说明 |
| --------- | ------ | ---- | ---- | ------ | ---- |
| » message | string | true | none |        | none |

# 数据模型



